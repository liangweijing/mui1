<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>axios</title>
	<!-- 这种用法axios是全局的 -->
	<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
	<script src="https://unpkg.com/vue/dist/vue.js"></script>
</head>
<body>
	<div id="app"></div>
	<script>
		var App={
            data(){
                return {
                    file:[]
                }
            },
			template:
				`
				<div>
					<input type='file' name='file' @change='changeHandler'>
                    <button @click='sendAjax'>发请求</button>
				</div>
				`
			,
			methods:{
                changeHandler(e){
                    this.file=e.target.files[0];
                    console.log(e.target.files);
                }
				,sendAjax(e){
                    this.$axios.defaults.baseURL="http://127.0.0.1:8888/";
                    // 获得的文件是以流的方式传输
                    var fd=new FormData();
                    fd.append('file',this.file);
                    // 将文件发送给服务器
				this.$axios.post('upload',fd,{
                    onUpLoadProgress:function(progressEvent){
                        console.log(progressEvent);
                    }
                }).then(res=>{
                    console.log(res);
                }).catch(err=>{
                    console.log(err);
                })
                ;
                

				
				}
			}  
		};
		Vue.prototype.$axios=axios;
		new Vue({
			el:'#app',
			template:'<App/>',
			components:{App}
		});
	</script>
</body>
</html>